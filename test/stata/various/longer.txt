
. 
. /*
>     regress
>     Example 1: Basic linear regression
>     auto.dta
> */
. regress mpg weight foreign

      Source |       SS           df       MS      Number of obs   =        74
-------------+----------------------------------   F(2, 71)        =     69.75
       Model |   1619.2877         2  809.643849   Prob > F        =    0.0000
    Residual |  824.171761        71   11.608053   R-squared       =    0.6627
-------------+----------------------------------   Adj R-squared   =    0.6532
       Total |  2443.45946        73  33.4720474   Root MSE        =    3.4071

------------------------------------------------------------------------------
         mpg |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      weight |  -.0065879   .0006371   -10.34   0.000    -.0078583   -.0053175
     foreign |  -1.650029   1.075994    -1.53   0.130      -3.7955    .4954422
       _cons |    41.6797   2.165547    19.25   0.000     37.36172    45.99768
------------------------------------------------------------------------------

. probit foreign weight mpg

Iteration 0:   log likelihood =  -45.03321  
Iteration 1:   log likelihood = -27.914626  
Iteration 2:   log likelihood = -26.858074  
Iteration 3:   log likelihood = -26.844197  
Iteration 4:   log likelihood = -26.844189  
Iteration 5:   log likelihood = -26.844189  

Probit regression                               Number of obs     =         74
                                                LR chi2(2)        =      36.38
                                                Prob > chi2       =     0.0000
Log likelihood = -26.844189                     Pseudo R2         =     0.4039

------------------------------------------------------------------------------
     foreign |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      weight |  -.0023355   .0005661    -4.13   0.000     -.003445   -.0012261
         mpg |  -.1039503   .0515689    -2.02   0.044    -.2050235   -.0028772
       _cons |   8.275464   2.554142     3.24   0.001     3.269437    13.28149
------------------------------------------------------------------------------

. logit foreign weight mpg

Iteration 0:   log likelihood =  -45.03321  
Iteration 1:   log likelihood = -29.238536  
Iteration 2:   log likelihood = -27.244139  
Iteration 3:   log likelihood = -27.175277  
Iteration 4:   log likelihood = -27.175156  
Iteration 5:   log likelihood = -27.175156  

Logistic regression                             Number of obs     =         74
                                                LR chi2(2)        =      35.72
                                                Prob > chi2       =     0.0000
Log likelihood = -27.175156                     Pseudo R2         =     0.3966

------------------------------------------------------------------------------
     foreign |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      weight |  -.0039067   .0010116    -3.86   0.000    -.0058894    -.001924
         mpg |  -.1685869   .0919175    -1.83   0.067    -.3487418     .011568
       _cons |   13.70837   4.518709     3.03   0.002     4.851859    22.56487
------------------------------------------------------------------------------

. 
. logit foreign /*
>     */ weight mpg

Iteration 0:   log likelihood =  -45.03321  
Iteration 1:   log likelihood = -29.238536  
Iteration 2:   log likelihood = -27.244139  
Iteration 3:   log likelihood = -27.175277  
Iteration 4:   log likelihood = -27.175156  
Iteration 5:   log likelihood = -27.175156  

Logistic regression                             Number of obs     =         74
                                                LR chi2(2)        =      35.72
                                                Prob > chi2       =     0.0000
Log likelihood = -27.175156                     Pseudo R2         =     0.3966

------------------------------------------------------------------------------
     foreign |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      weight |  -.0039067   .0010116    -3.86   0.000    -.0058894    -.001924
         mpg |  -.1685869   .0919175    -1.83   0.067    -.3487418     .011568
       _cons |   13.70837   4.518709     3.03   0.002     4.851859    22.56487
------------------------------------------------------------------------------

. 
. sysuse auto2, clear
(1978 Automobile Data)

. 
. // summarize
. summarize, separator(4)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        make |          0
       price |         74    6165.257    2949.496       3291      15906
         mpg |         74     21.2973    5.785503         12         41
       rep78 |         69    3.405797    .9899323          1          5
-------------+---------------------------------------------------------
    headroom |         74    2.993243    .8459948        1.5          5
       trunk |         74    13.75676    4.277404          5         23
      weight |         74    3019.459    777.1936       1760       4840
      length |         74    187.9324    22.26634        142        233
-------------+---------------------------------------------------------
        turn |         74    39.64865    4.399354         31         51
displacement |         74    197.2973    91.83722         79        425
  gear_ratio |         74    3.014865    .4562871       2.19       3.89
     foreign |         74    .2972973    .4601885          0          1

. 
. summarize, separator(0)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        make |          0
       price |         74    6165.257    2949.496       3291      15906
         mpg |         74     21.2973    5.785503         12         41
       rep78 |         69    3.405797    .9899323          1          5
    headroom |         74    2.993243    .8459948        1.5          5
       trunk |         74    13.75676    4.277404          5         23
      weight |         74    3019.459    777.1936       1760       4840
      length |         74    187.9324    22.26634        142        233
        turn |         74    39.64865    4.399354         31         51
displacement |         74    197.2973    91.83722         79        425
  gear_ratio |         74    3.014865    .4562871       2.19       3.89
     foreign |         74    .2972973    .4601885          0          1

. 
. // summarize
. // minimally
. sum make

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        make |          0

. 
. /*
>     table
>     Example 1
>     auto2.dta
> */
. table rep78

----------------------
Repair    |
Record    |
1978      |      Freq.
----------+-----------
     Poor |          2
     Fair |          8
  Average |         30
     Good |         18
Excellent |         11
----------------------

. 
. tab foreign if foreign == 1

   Car type |      Freq.     Percent        Cum.
------------+-----------------------------------
    Foreign |         22      100.00      100.00
------------+-----------------------------------
      Total |         22      100.00

. 
. /*
>     table with contents
>     Example 1 with multiple statistics
>     auto2.dta
> */
. table rep78, contents(n mpg mean mpg sd mpg median mpg)

----------------------------------------------------------
Repair    |
Record    |
1978      |     N(mpg)   mean(mpg)     sd(mpg)    med(mpg)
----------+-----------------------------------------------
     Poor |          2          21     4.24264          21
     Fair |          8      19.125    3.758324          18
  Average |         30     19.4333    4.141325          19
     Good |         18     21.6667     4.93487        22.5
Excellent |         11     27.3636    8.732385          30
----------------------------------------------------------

. 
. 
. use N:/INK/matvan/stata/data/rod93.dta, clear

. /*
>     nbreg
>     Remarks and examples
>     rod93.dta
> */
. nbreg deaths i.cohort

Fitting Poisson model:

Iteration 0:   log likelihood =  -325.7993  
Iteration 1:   log likelihood =  -325.7993  

Fitting constant-only model:

Iteration 0:   log likelihood = -114.33669  
Iteration 1:   log likelihood = -110.33038  
Iteration 2:   log likelihood = -108.56521  
Iteration 3:   log likelihood = -108.56018  
Iteration 4:   log likelihood = -108.56018  

Fitting full model:

Iteration 0:   log likelihood = -108.48867  
Iteration 1:   log likelihood = -108.48841  
Iteration 2:   log likelihood = -108.48841  

Negative binomial regression                    Number of obs     =         21
                                                LR chi2(2)        =       0.14
Dispersion     = mean                           Prob > chi2       =     0.9307
Log likelihood = -108.48841                     Pseudo R2         =     0.0007

------------------------------------------------------------------------------
      deaths |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      cohort |
  1960-1967  |   .0591305   .2978419     0.20   0.843    -.5246289      .64289
  1968-1976  |  -.0538792   .2981621    -0.18   0.857    -.6382662    .5305077
             |
       _cons |   4.435906   .2107213    21.05   0.000       4.0229    4.848912
-------------+----------------------------------------------------------------
    /lnalpha |  -1.207379   .3108622                     -1.816657   -.5980999
-------------+----------------------------------------------------------------
       alpha |     .29898   .0929416                      .1625683    .5498555
------------------------------------------------------------------------------
LR test of alpha=0: chibar2(01) = 434.62               Prob >= chibar2 = 0.000

. 
. 
. gen logexp = ln(exposure)

. /*
>     nbreg with offset
>     Remarks and examples
>     rod93.dta
> */
. nbreg deaths i.cohort, ///
>     offset(logexp) nolog

Negative binomial regression                    Number of obs     =         21
                                                LR chi2(2)        =       0.40
Dispersion     = mean                           Prob > chi2       =     0.8171
Log likelihood =  -131.3799                     Pseudo R2         =     0.0015

------------------------------------------------------------------------------
      deaths |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      cohort |
  1960-1967  |  -.2676187   .7237203    -0.37   0.712    -1.686084    1.150847
  1968-1976  |  -.4573957   .7236651    -0.63   0.527    -1.875753    .9609618
             |
       _cons |  -2.086731    .511856    -4.08   0.000     -3.08995   -1.083511
      logexp |          1  (offset)
-------------+----------------------------------------------------------------
    /lnalpha |   .5939963   .2583615                      .0876171    1.100376
-------------+----------------------------------------------------------------
       alpha |   1.811212   .4679475                       1.09157    3.005295
------------------------------------------------------------------------------
LR test of alpha=0: chibar2(01) = 4056.27              Prob >= chibar2 = 0.000

. 
. 
. use N:/INK/matvan/stata/data/margex.dta, clear
(Artificial data for margins)

. regress y i.sex i.group

      Source |       SS           df       MS      Number of obs   =     3,000
-------------+----------------------------------   F(3, 2996)      =    152.06
       Model |  183866.077         3  61288.6923   Prob > F        =    0.0000
    Residual |  1207566.93     2,996  403.059723   R-squared       =    0.1321
-------------+----------------------------------   Adj R-squared   =    0.1313
       Total |  1391433.01     2,999  463.965657   Root MSE        =    20.076

------------------------------------------------------------------------------
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sex |
     female  |   18.32202   .8930951    20.52   0.000     16.57088    20.07316
             |
       group |
          2  |   8.037615    .913769     8.80   0.000     6.245937    9.829293
          3  |   18.63922   1.159503    16.08   0.000     16.36572    20.91272
             |
       _cons |   53.32146   .9345465    57.06   0.000     51.48904    55.15388
------------------------------------------------------------------------------

. 
. margins sex

Predictive margins                              Number of obs     =      3,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sex |
       male  |   60.56034   .5781782   104.74   0.000     59.42668    61.69401
     female  |   78.88236   .5772578   136.65   0.000      77.7505    80.01422
------------------------------------------------------------------------------

. 
. 
. regress y i.sex i.group

      Source |       SS           df       MS      Number of obs   =     3,000
-------------+----------------------------------   F(3, 2996)      =    152.06
       Model |  183866.077         3  61288.6923   Prob > F        =    0.0000
    Residual |  1207566.93     2,996  403.059723   R-squared       =    0.1321
-------------+----------------------------------   Adj R-squared   =    0.1313
       Total |  1391433.01     2,999  463.965657   Root MSE        =    20.076

------------------------------------------------------------------------------
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sex |
     female  |   18.32202   .8930951    20.52   0.000     16.57088    20.07316
             |
       group |
          2  |   8.037615    .913769     8.80   0.000     6.245937    9.829293
          3  |   18.63922   1.159503    16.08   0.000     16.36572    20.91272
             |
       _cons |   53.32146   .9345465    57.06   0.000     51.48904    55.15388
------------------------------------------------------------------------------

. margins sex group

Predictive margins                              Number of obs     =      3,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sex |
       male  |   60.56034   .5781782   104.74   0.000     59.42668    61.69401
     female  |   78.88236   .5772578   136.65   0.000      77.7505    80.01422
             |
       group |
          1  |   62.49469   .6464118    96.68   0.000     61.22723    63.76214
          2  |    70.5323   .6065696   116.28   0.000     69.34297    71.72164
          3  |   81.13391    .848727    95.59   0.000     79.46976    82.79805
------------------------------------------------------------------------------

. 
. logistic outcome i.sex i.group sex#group age

Logistic regression                             Number of obs     =      3,000
                                                LR chi2(6)        =     629.27
                                                Prob > chi2       =     0.0000
Log likelihood = -1051.4383                     Pseudo R2         =     0.2303

------------------------------------------------------------------------------
     outcome | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sex |
     female  |   .8618894    .146532    -0.87   0.382     .6176417    1.202725
             |
       group |
          2  |    .190021   .0451515    -6.99   0.000     .1192737     .302732
          3  |    .151552   .0485633    -5.89   0.000     .0808729    .2840013
             |
   sex#group |
   female#2  |   4.890637   1.371176     5.66   0.000     2.823034    8.472561
   female#3  |   1.965945   1.571546     0.85   0.398     .4103305    9.419088
             |
         age |   1.095824   .0072039    13.92   0.000     1.081796    1.110035
       _cons |   .0062258   .0022208   -14.24   0.000     .0030943    .0125266
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

. margins sex#group

Predictive margins                              Number of obs     =      3,000
Model VCE    : OIM

Expression   : Pr(outcome), predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   sex#group |
     male#1  |   .2379605   .0237178    10.03   0.000     .1914745    .2844465
     male#2  |   .0658294   .0105278     6.25   0.000     .0451953    .0864636
     male#3  |   .0538001   .0136561     3.94   0.000     .0270347    .0805656
   female#1  |   .2158632   .0112968    19.11   0.000     .1937218    .2380045
   female#2  |   .2054406   .0183486    11.20   0.000     .1694781    .2414032
   female#3  |    .085448   .0533914     1.60   0.110    -.0191973    .1900932
------------------------------------------------------------------------------

. 
. /*
> use N:/INK/matvan/stata/data/.dta, clear
> // no canonical example in Stata 16 manual
> estat vif
> capture log close
> */
. 
. /*
> use N:/INK/matvan/stata/data/mroz.dta, clear
> logit lfp k5 k618 age wc hc lwg inc
> capture log using results/fitstat.txt, replace
> // canonical example uses very old version of mroz
> fitstat
> */
. 
. capture log close
